(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a=a||self,a.setTemplate=b())})(this,function(){'use strict';function a(e,f,g){const h=void 0===a.prototype.container;a.prototype.container=g||a.prototype.container;const i=a.prototype.container.shadowRoot?a.prototype.container.shadowRoot:a.prototype.container.attachShadow({mode:"open"});return new Promise(a=>{fetch(e).then(a=>a.text()).then(j=>{const k=c(j),l=d(k);window.local={};const m=k.querySelector("script[global]");if(m){const a=document.createElement("script");a.textContent=m.textContent,a.dataset.global=!0,m.replaceWith(a)}const n=k.querySelector("script:not([data-global='true'])");n&&b({script:n,props:f,domTree:k,id:l,local:window.local,global:window,asynchronnous:!!n.hasAttribute("async")});const o=(void 0===g||h)&&(!n||"ignore"!==n.getAttribute("history"));if(o&&window.history.pushState({file:e,props:f},null,null),i)for(;i.firstChild;)i.removeChild(i.lastChild);i.appendChild(k),a()})})}function b({script:b,props:c,domTree:d,id:e,local:f,global:g,asynchronnous:h}){return new Function(`return (${h?"async ":""}function(setTemplate){
	"use strict";
	${b.textContent}
})`)().bind({currentScript:b,props:c,currentDom:d,id:e,global:g,local:f,asynchronnous:h})(a)}function c(a){const b=document.createElement("template");return b.innerHTML=a,b.content}function d(a){const b={};return Array.from(a.querySelectorAll("[id]")).forEach(a=>{b[a.id]=a}),b}return window.addEventListener("popstate",b=>{a(b.state.file,b.state.props)}),a});
