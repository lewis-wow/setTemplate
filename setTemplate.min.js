(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a=a||self,a.Template=b())})(this,function(){'use strict';function a(a){for(;a.firstChild;)a.removeChild(a.lastChild);return a}function b(a,b,g){return new Promise(h=>{fetch(a).then(a=>a.text()).then(i=>{const j=d(i),k=e(j);window.local={};const l=j.querySelector("script[global]");if(l){const a=document.createElement("script");a.textContent=l.textContent,a.dataset.global=!0,l.replaceWith(a)}const m=j.querySelector("script:not([data-global='true'])"),n={push:!1};let o=()=>{};let p=null;m&&(p=c({currentScript:m,local:window.local,global:window,async:!!m.hasAttribute("async"),history:n,parentNode:g,onMount:a=>o=a,style:function(a,b){let c="";for(const[d,e]of Object.entries(b))c+=`${d}: ${e};`;return a.style.cssText=c,c},props:b,currentDom:j,id:k,setContent:async(a,b)=>new f(a,b,g),elemFromString:d})),n.push&&window.history.pushState({file:a,props:b},null,null),h([j,p]),o()})})}function c(a){return new Function(`return (${a.async?"async ":""}function(){"use strict";${a.currentScript.textContent}})`)().bind(a)()}function d(a){const b=document.createElement("template");return b.innerHTML=a,b.content}function e(a){const b={};return Array.from(a.querySelectorAll("[id]")).forEach(a=>{b[a.id]=a}),b}class f{constructor(c,d={},e=document.currentScript.parentNode.attachShadow({mode:"open"})){return new Promise(f=>{b(c,d,e).then(([b,c])=>{a(e),e.appendChild(b),f(c)})})}}return window.addEventListener("popstate",a=>{b(a.state.file,a.state.props)}),f});
